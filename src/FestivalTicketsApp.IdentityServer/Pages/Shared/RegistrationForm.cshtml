@using FestivalTicketsApp.Shared
@using System.Globalization
@model FestivalTicketsApp.IdentityServer.Models.RegisterViewModel

@{
    List<SelectListItem> roleOptions = Model.RoleList
        .Select(role =>
            new SelectListItem { Value = role, Text = CultureInfo.CurrentCulture.TextInfo.ToTitleCase(role) })
        .ToList();
}

<form asp-page="@Model.PageHandler">
    <div class="row">
        <div class="form-group col-12">
            <label asp-for="Username"></label>
            <input class="form-control" placeholder="Username" asp-for="Username" autofocus>
        </div>
        <div class="form-group col-6">
            <label asp-for="Password"></label>
            <input type="password" class="form-control" placeholder="Password" asp-for="Password" autocomplete="off">
        </div>
        <div class="form-group col-6">
            <label asp-for="ConfirmPassword"></label>
            <input type="password" class="form-control" placeholder="Password" asp-for="ConfirmPassword" autocomplete="off">
        </div>
        <div class="form-group col-6">
            <label asp-for="Name"></label>
            <input class="form-control" placeholder="Name" asp-for="Name" autocomplete="off">
        </div>
        <div class="form-group col-6">
            <label asp-for="Surname"></label>
            <input class="form-control" placeholder="Surname" asp-for="Surname" autocomplete="off">
        </div>
        <div class="form-group col-12">
            <label asp-for="Email"></label>
            <input type="email" class="form-control" placeholder="Email" asp-for="Email">
        </div>
        <div class="form-group col-12">
            <label asp-for="Phone"></label>
            <input class="form-control" id="phoneNumber" placeholder="Phone" asp-for="Phone">
        </div>
        @if (Model.ShowRoleSelect ?? false)
        {
            <div class="form-group col-12">
                <label asp-for="Role"></label>
                <select class="form-control" id="roleSelect" asp-for="Role" asp-items="@roleOptions"></select>
            </div>
            <div class="form-group col-12" id="staffCodeInputDiv" hidden>
                <label asp-for="StaffCode"></label>
                <input type="password" class="form-control" asp-for="StaffCode" />
            </div>
        }
        else
        {
            <input asp-for="Role" value="@UserRolesConstants.Client" hidden>
        }
        <input asp-for="ReturnUrl" hidden>
    </div>
    <input type="submit" class="btn btn-primary" value="Sign up">
    <a class="btn btn-secondary" href="@Model.ReturnUrl">
        Cancel
    </a>
</form>